<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//IT" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>One Movie APP</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

	<link rel="stylesheet" href="style.css" type="text/css" media="screen" />

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Oswald:400,300' rel='stylesheet' type='text/css'>

</head>

<body background="img/banner2.jpg">
    <div id="container">

	    <div id="header">One Movie app</div>
        <div class="clear"></div>

        <div id="mes"> 
            <p>cerca per titolo e genere</p>
            <input type="text" id="titolo" value="One Piece">
            <select id="tipo">
                <option value="movie">Movie</option>
                <option value="series">Series</option>
                <option value="episodes">Episodes</option>
            </select>
            <button onclick="Search()">Search</button>
        </div>

        
        
        <div id="nav">
		    <a href="./index.html">Annulla Ricerca</a>
        </div>

        <div id="movies"></div>
        
        <script>
            function Search(){
                document.getElementById("movies").innerHTML="";
                const url="http://www.omdbapi.com/?apikey=96fcfbd7&s="+document.getElementById("titolo").value+
                          "&type="+document.getElementById("tipo").value;
                fetch(url)
                    .then((response) => response.json())
                    .then((results) => {
                        const items = results.Search;
                        viewItems(items);
                });
            };
            const viewItems = (item) => {
                const element = document.getElementById("movies");
                item.map((item) => {
                element.appendChild(createHTMLMovie(item));
                });
            };
            const createHTMLMovie = (movie) => {
                const node = document.createElement("a");
                //node.onclick = pagina(movie.title);
                node.style = "margin: 10px;border-radius: 10px 10px 10px 10px;width:280px;padding: 50px;display:inline-block;text-transform:uppercase; color: white;background:rgba(0, 0, 0, 0.5); ";
                const img = document.createElement("img");
                img.src = movie.Poster;
                const textnode = document.createTextNode(movie.Title);
                node.appendChild(img);
                node.appendChild(textnode);
                return node;
            };
            /*
            prove per creare una pagina in base al film cliccato

            const pagina = (title) => {
                window.var=title;
                location.href="./film.html";
            }
            */
        </script>

	    <div class="clear"></div>

	    <footer id="footer"><p></p></footer>

    </div>
</body>
</html>